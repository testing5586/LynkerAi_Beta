<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>我的真命盘 - LynkerAI</title>
    <link rel="stylesheet" href="/static/css/verify.css">
</head>
<body data-user-id="{{ user_id }}">
<div class="app-container">
    <!-- 左侧导航栏 -->
    <aside class="sidebar">
        <div class="logo">
            <h2>LynkerAI</h2>
        </div>
        <nav class="nav-menu">
            <a href="/dashboard" class="nav-item">
                <span class="icon">📊</span> Dashboard
            </a>
            <a href="#" class="nav-item">
                <span class="icon">🔍</span> Search
            </a>
            
            <!-- 我的命盘（可展开） -->
            <div class="nav-item expandable active" data-menu="charts">
                <span class="icon">🔐</span> 我的命盘
                <span class="arrow">▼</span>
            </div>
            <div class="nav-submenu" data-parent="charts">
                <a href="/verify?user_id={{ user_id }}" class="nav-sub-item">我的真命盘分析</a>
                <a href="#" class="nav-sub-item">可能出生时辰1</a>
                <a href="#" class="nav-sub-item">可能出生时辰2</a>
                <a href="#" class="nav-sub-item">可能出生时辰3</a>
            </div>
            
            <!-- NewChat（可展开） -->
            <div class="nav-item expandable" data-menu="chat">
                <span class="icon">💬</span> NewChat
                <span class="arrow">▼</span>
            </div>
            <div class="nav-submenu hidden" data-parent="chat">
                <a href="#" class="nav-sub-item">我的真命盘合盘分析</a>
                <a href="#" class="nav-sub-item">可能出生时刻1</a>
                <a href="#" class="nav-sub-item">可能出生时刻2</a>
                <a href="#" class="nav-sub-item">可能出生时刻3</a>
            </div>
        </nav>
    </aside>

    <!-- 中间主区域 -->
    <main class="main-content">
        <!-- 页面标题 -->
        <header class="page-header">
            <h1>我的真命盘</h1>
            <p class="subtitle">在这里还原真实的出生时辰。输入3组经验的出生时辰后，让我们组合3组可能的人生轨迹，再由你亲自对比、选择最适合的那一个。本平台不提供算盘服务，请从其他平台拿到算盘的图片或文本后再验证。</p>
        </header>

        <!-- 两个并排上传框 -->
        <section class="upload-section">
            <div class="upload-grid">
                <!-- 八字命盘上传框 -->
                <div class="upload-card" id="baziCard">
                    <h3>八字命盘</h3>
                    <div class="dropzone" id="baziDropzone">
                        <div class="dropzone-icon">☁️</div>
                        <p class="dropzone-text">拖拽图片到这里 或</p>
                        <button class="btn-upload" onclick="document.getElementById('baziFile').click()">选择文件</button>
                        <input type="file" id="baziFile" accept="image/*,.txt" style="display:none;">
                        <p class="dropzone-hint">也可以直接粘贴命盘文本</p>
                    </div>
                    <textarea 
                        id="baziText" 
                        class="chart-input" 
                        placeholder="或者直接粘贴八字命盘文本..."
                        rows="6"
                    ></textarea>
                </div>

                <!-- 紫微斗数命盘上传框 -->
                <div class="upload-card" id="ziweiCard">
                    <h3>紫微斗数命盘</h3>
                    <div class="dropzone" id="ziweiDropzone">
                        <div class="dropzone-icon">☁️</div>
                        <p class="dropzone-text">拖拽图片到这里 或</p>
                        <button class="btn-upload" onclick="document.getElementById('ziweiFile').click()">选择文件</button>
                        <input type="file" id="ziweiFile" accept="image/*,.txt" style="display:none;">
                        <p class="dropzone-hint">也可以直接粘贴命盘文本</p>
                    </div>
                    <textarea 
                        id="ziweiText" 
                        class="chart-input" 
                        placeholder="或者直接粘贴紫微斗数命盘文本..."
                        rows="6"
                    ></textarea>
                </div>
            </div>
        </section>

        <!-- 两个只读结果展示区 -->
        <section class="results-section">
            <!-- 八字验证结果展示区 -->
            <div class="result-box" id="baziResult">
                <div class="result-header">
                    <h4>📄 八字命盘验证结果</h4>
                    <span class="result-status" id="baziStatus">等待上传...</span>
                </div>
                <div class="result-content" id="baziResultContent">
                    <p class="empty-state">上传八字命盘后，验证结果将显示在这里</p>
                </div>
            </div>

            <!-- 紫微斗数验证结果展示区 -->
            <div class="result-box" id="ziweiResult">
                <div class="result-header">
                    <h4>📄 紫微斗数命盘验证结果</h4>
                    <span class="result-status" id="ziweiStatus">等待上传...</span>
                </div>
                <div class="result-content" id="ziweiResultContent">
                    <p class="empty-state">上传紫微命盘后，验证结果将显示在这里</p>
                </div>
            </div>
        </section>
    </main>

    <!-- 右侧：Primary Chatbox（唯一可对话的 AI） -->
    <aside class="chatbox-panel">
        <div class="chatbox-header">
            <h3>💬 Child AI 助手</h3>
            <p class="chatbox-subtitle">我会引导你完成命盘验证</p>
        </div>
        
        <div class="chatbox-messages" id="chatMessages">
            <!-- 初始欢迎消息 -->
            <div class="message ai-message">
                <div class="message-avatar">🤖</div>
                <div class="message-content">
                    <p>你好！我是 Child AI 助手。</p>
                    <p>请先上传你的<strong>八字命盘</strong>（可以拖拽图片或粘贴文本到左侧上传框）。</p>
                    <p>上传后，我会帮你分析验证结果。</p>
                </div>
            </div>
        </div>
        
        <div class="chatbox-input-area">
            <textarea 
                id="chatInput" 
                class="chatbox-input" 
                placeholder="输入你的问题或回复..."
                rows="2"
            ></textarea>
            <button id="chatSendBtn" class="chatbox-send-btn">发送</button>
        </div>
    </aside>
</div>

<script src="/static/js/verify_wizard.js"></script>
</body>
</html>
