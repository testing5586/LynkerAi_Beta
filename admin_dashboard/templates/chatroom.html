<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI åä½œèŠå¤©å®¤ - LynkerAI</title>
    <link rel="stylesheet" href="/static/css/style.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.6.0/socket.io.js"></script>
</head>
<body>
<div class="sidebar">
    <h2>ğŸ’¬ ä¸‰æ–¹AIåä½œ</h2>
    <p class="sidebar-subtitle">Master / Leader / Child</p>
    <ul>
        <li><a href="/dashboard">ğŸ“Š Dashboard</a></li>
        <li><a href="/chatroom" class="active">ğŸ’¬ Chatroom</a></li>
    </ul>
    
    <div class="ai-status">
        <h4>AI è§’è‰²çŠ¶æ€</h4>
        <div class="status-item">
            <span class="status-dot online"></span>
            <span>Master AI ğŸ§ </span>
        </div>
        <div class="status-item">
            <span class="status-dot online"></span>
            <span>Group Leader ğŸ§©</span>
        </div>
        <div class="status-item">
            <span class="status-dot online"></span>
            <span>Child AI ğŸ¤–</span>
        </div>
    </div>
</div>

<div class="main">
    <h1>Superintendent AI æŒ‡ä»¤å°</h1>
    <p class="timestamp">å®æ—¶åä½œé€šä¿¡</p>
    
    <div class="chat-container">
        <div id="chat-window" class="chat-window">
            <div class="system-msg">ç³»ç»Ÿ: ä¸‰æ–¹ AI åä½œèŠå¤©å®¤å·²å°±ç»ªï¼Œè¾“å…¥æŒ‡ä»¤å¼€å§‹å¯¹è¯...</div>
        </div>
        
        <div class="chat-input-container">
            <input id="msg" type="text" placeholder="è¾“å…¥å‘½ä»¤æˆ–æé—®..." />
            <button onclick="sendMsg()">å‘é€</button>
        </div>
    </div>
</div>

<script>
const socket = io();

function sendMsg() {
    const msgInput = document.getElementById('msg');
    const msg = msgInput.value.trim();
    
    if (!msg) return;
    
    const chatWindow = document.getElementById('chat-window');
    chatWindow.innerHTML += `<div class="msg user-msg">ğŸ‘¤ Superintendent: ${msg}</div>`;
    
    socket.emit('send_message', { message: msg });
    msgInput.value = '';
    
    chatWindow.scrollTop = chatWindow.scrollHeight;
}

document.getElementById('msg').addEventListener('keypress', function(e) {
    if (e.key === 'Enter') {
        sendMsg();
    }
});

socket.on('receive_message', function(data){
    const chatWindow = document.getElementById('chat-window');
    
    data.forEach(reply => {
        chatWindow.innerHTML += `<div class="msg ai-msg">${reply}</div>`;
    });
    
    chatWindow.scrollTop = chatWindow.scrollHeight;
});
</script>
</body>
</html>
